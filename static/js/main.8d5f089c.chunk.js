(this["webpackJsonpcalendar-app"]=this["webpackJsonpcalendar-app"]||[]).push([[0],{13:function(e,t,a){e.exports=a(19)},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(11),o=a.n(r),i=a(4),l=a(12),s=a(20),u=a(29),m="p",d="d",v="dd MMMM yyyy",f="dd/MM/yy",b="LLLL",E="MMMM yyyy",p="yyyy",h="MM",j="dd";var O=function(e){return c.a.createElement("div",{className:"header row row-middle flex-around"},c.a.createElement("span",{className:"icon anim-icon",onClick:function(){e.setCurrentMonth(Object(s.a)(e.currentMonth,1))}},"chevron_left"),c.a.createElement("span",null,Object(u.a)(e.currentMonth,E)),c.a.createElement("span",{className:"icon anim-icon",onClick:function(){e.setCurrentMonth(Object(l.a)(e.currentMonth,1))}},"chevron_right"))};var y=function(){for(var e=[],t=0,a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];t<a.length;t++){var n=a[t];e.push(c.a.createElement("div",{className:"column col-center",key:n},n))}return c.a.createElement("div",{className:"days row"},e)},D=a(22),N=a(23),T=a(24),S=a(25),C=a(26),g=a(21),w=a(30),k=a(7),M=function(e,t){var a={},n="y_".concat(Object(u.a)(t,"yyyy")),c="m_".concat(Object(u.a)(t,"MM")),r="d_".concat(Object(u.a)(t,"dd"));return e[n]&&e[n][c]&&e[n][c][r]&&(a=e[n][c][r]),a},x=function(e){if(!e)return"";var t=e.split(":"),a=parseInt(t[0]),n=t[1],c="AM";a>=12&&(c="PM",a%=12);var r=0===a?"12":("0"+a.toString()).slice(-2);return"".concat(r,":").concat(n," ").concat(c)},_=function(e,t){var a=t.startDateTime,n="y_".concat(Object(u.a)(a,p)),c="m_".concat(Object(u.a)(a,h)),r="d_".concat(Object(u.a)(a,j));e[n]||(e[n]={}),e[n][c]||(e[n][c]={}),e[n][c][r]||(e[n][c][r]={}),e[n][c][r][t.uid]=t,e[n][c][r]=function(e){var t,a={},n=Object.keys(e).sort((function(t,a){return e[t].startDateTime<e[a].startDateTime?-1:1})),c=Object(k.a)(n);try{for(c.s();!(t=c.n()).done;){var r=t.value;a[r]=e[r]}}catch(o){c.e(o)}finally{c.f()}return a}(e[n][c][r])},I=function(e,t){var a=e.split(":"),n=new Date(t.toString());return n.setHours(a[0]),n.setMinutes(a[1]),n},L=function(e){if(!e)return"";var t=[];return t.push(("0"+e.getHours()).slice(-2)),t.push(("0"+e.getMinutes()).slice(-2)),t.join(":")};var F=function(e){var t=Object(n.useRef)(null),a=Object(n.useState)(!1),r=Object(i.a)(a,2),o=r[0],l=r[1],s=Object(n.useContext)(X),v=M(s.eventSchedule,e.day),f=[];for(var b in v){var E=v[b];f.push(c.a.createElement("li",{key:b},E.startDateTime&&c.a.createElement("span",{className:"mr5"},Object(u.a)(E.startDateTime,m)),c.a.createElement("span",{className:"event-subject"},E.subject)))}Object(n.useEffect)((function(){t.current.scrollHeight-t.current.clientHeight>0?l(!0):l(!1)}),[v]);var p="";return Object(g.a)(e.day,e.monthStart)||(p+=" disabled"),Object(w.a)(e.day,e.todaysDate)&&(p+=" highlighted"),c.a.createElement("div",{className:"column cell ".concat(p),ref:t,onClick:function(){return e.onDateClick(e.day)}},c.a.createElement("span",{className:"number"},Object(u.a)(e.day,d)),c.a.createElement("ul",{className:"ul-no-bullets cell-event-list"},f),o&&c.a.createElement("span",{className:"overflow-banner"},"...more events"))};var B=function(e){for(var t=Object(D.a)(e.currentMonth),a=Object(N.a)(t),n=Object(T.a)(t),r=Object(S.a)(a),o=[],i=[],l=n;l<=r;){for(var s=0;s<7;s++)i.push(c.a.createElement(F,{day:l,key:l,monthStart:t,todaysDate:e.todaysDate,onDateClick:e.onDateClick})),l=Object(C.a)(l,1);o.push(c.a.createElement("div",{className:"row",key:l}," ",i," ")),i=[]}return c.a.createElement("div",{className:"body"},o)};var A=function(e){var t=e.event||{},a=Object(n.useState)(t.subject||""),r=Object(i.a)(a,2),o=r[0],l=r[1],s=Object(n.useState)(L(t.startDateTime)||"08:00"),u=Object(i.a)(s,2),m=u[0],d=u[1],v=Object(n.useState)(L(t.endDateTime)||"18:00"),f=Object(i.a)(v,2),b=f[0],E=f[1],p=Object(n.useState)(t.location||""),h=Object(i.a)(p,2),j=h[0],O=h[1],y=Object(n.useState)(t.description||""),D=Object(i.a)(y,2),N=D[0],T=D[1],S=Object(n.useState)(""),C=Object(i.a)(S,2),g=C[0],w=C[1],k=Object(n.useState)(""),M=Object(i.a)(k,2),x=M[0],_=M[1],F=Object(n.useContext)(X),B=function(){var e=!0,t="",a="";return""===o.trim()&&(t="Subject cannot be empty",e=!1),""===m.trim()||""===b.trim()?(a="Start and End time cannot be empty",e=!1):function(e,t){var a=e.split(":"),n=t.split(":"),c=parseInt(a[0])-parseInt(n[0]);return(c=0===c?parseInt(a[1])-parseInt(n[1]):c)<0}(m,b)||(a="End Time must be ahead of start time",e=!1),e||(w(t),_(a)),e};return c.a.createElement("li",{className:"event-card"},c.a.createElement("form",{className:"event-form",onSubmit:function(a){if(a.preventDefault(),B()){var n=t.uid?"EDIT_EVENT":"ADD_EVENT",c={uid:t.uid,subject:o,location:j,description:N,startDateTime:I(m,e.date),endDateTime:I(b,e.date)};F.eventScheduleDispatch({type:n,event:c}),e.closeFormCallBack()}}},c.a.createElement("span",{className:"form-row"},c.a.createElement("label",{htmlFor:"subject"},"Subject",c.a.createElement("span",{className:"mandatory-field"},"*")),c.a.createElement("input",{name:"subject",type:"type",maxLength:"30",placeholder:"Event subject",autoFocus:!0,value:o,onChange:function(e){return l(e.target.value)}})),g&&c.a.createElement("div",{className:"form-validation-error"},g),c.a.createElement("span",{className:"form-row"},c.a.createElement("label",{htmlFor:"startTime"},"Start time",c.a.createElement("span",{className:"mandatory-field"},"*")),c.a.createElement("input",{className:"mr10",name:"startTime",type:"time",value:m,onChange:function(e){return d(e.target.value)}}),c.a.createElement("label",{htmlFor:"endTime"},"End time",c.a.createElement("span",{className:"mandatory-field"},"*")),c.a.createElement("input",{name:"endTime",type:"time",value:b,onChange:function(e){return E(e.target.value)}})),x&&c.a.createElement("div",{className:"form-validation-error"},x),c.a.createElement("span",{className:"form-row"},c.a.createElement("label",{htmlFor:"location"},"Location"),c.a.createElement("input",{name:"location",type:"text",value:j,onChange:function(e){return O(e.target.value)}})),c.a.createElement("span",{className:"form-row"},c.a.createElement("label",{htmlFor:"description"},"Description"),c.a.createElement("textarea",{name:"description",type:"text",value:N,onChange:function(e){return T(e.target.value)}})),c.a.createElement("button",{type:"submit",className:"mr10 btn-primary"},"Save"),c.a.createElement("button",{type:"cancel",onClick:function(){return e.closeFormCallBack()}},"Cancel")))};var V=function(e){return c.a.createElement("div",{className:"event-card"},c.a.createElement("div",{className:"flex-bx flex-between row-middle pb5"},c.a.createElement("div",{className:"card-title"},c.a.createElement("span",{className:"event-subject mr10"},e.event.subject),e.event.startDateTime&&c.a.createElement("span",null,Object(u.a)(e.event.startDateTime,m)," - ",Object(u.a)(e.event.endDateTime,m))),e.showEditOptions&&c.a.createElement("div",{className:"flex-bx"},c.a.createElement("span",{className:"icon anim-icon mr10",title:"Edit",onClick:e.handleEditBtnClick},"edit"),c.a.createElement("span",{className:"icon anim-icon",title:"Delete",onClick:e.handleDeleteBtnClick},"delete_outline"))),e.event.location&&c.a.createElement("div",{className:"flex-bx row-middle pb5"},c.a.createElement("span",{className:"icon"},"location_on"),c.a.createElement("span",null,e.event.location)),e.event.description&&c.a.createElement("span",null,e.event.description))};var H=function(e){var t=e.event,a=Object(n.useState)(!1),r=Object(i.a)(a,2),o=r[0],l=r[1],s=Object(n.useContext)(X);return o?c.a.createElement(A,{date:e.date,closeFormCallBack:function(){l(!1)},event:t}):c.a.createElement("li",null,c.a.createElement(V,{event:t,showEditOptions:!0,handleDeleteBtnClick:function(){s.eventScheduleDispatch({type:"DELETE_EVENT",event:t})},handleEditBtnClick:function(){return l(!0)}}))};var R=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],o=a[1],l=Object(n.useContext)(X),s=M(l.eventSchedule,e.selectedDate),m=[];for(var d in s){var f=s[d];m.push(c.a.createElement(H,{key:d,event:f,date:e.selectedDate}))}return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modalMask",onClick:function(){return e.setEventsView(!1)}}),c.a.createElement("div",{className:"popover modal daily-events"},c.a.createElement("div",{className:"header flex-bx flex-between"},c.a.createElement("span",null,Object(u.a)(e.selectedDate,v)),c.a.createElement("div",null,c.a.createElement("button",{className:"mr10 btn-primary",onClick:function(){return o(!0)}},c.a.createElement("span",{className:"icon"},"add"),"New Event"),c.a.createElement("span",{className:"icon anim-icon",onClick:function(){return e.setEventsView(!1)}},"close"))),c.a.createElement("div",null,c.a.createElement("ul",{className:"events-list ul-no-bullets"},r&&c.a.createElement(A,{date:e.selectedDate,closeFormCallBack:function(){o(!1)}}),m.length>0?m:!r&&"You don't have any events scheduled for this day..."))))},J=a(5),P=a(27);var U=function(e){return c.a.createElement("div",{className:"toast-notification shake"},c.a.createElement("span",{className:"fr icon anim-icon",onClick:e.onCloseHandler},"close"),c.a.createElement(V,{event:e.event,showEditOptions:!1}))},W=function(e){if("Notification"in window){var t="".concat(e.subject," \t ").concat(x(e.startTime)," - ").concat(x(e.endTime)),a={body:e.description};"granted"===Notification.permission?new Notification(t,a):"denied"!==Notification.permission&&Notification.requestPermission().then((function(e){"granted"===e&&new Notification(t,a)}))}else alert("This browser does not support desktop notifications")};var q=function(e){var t=Object(n.useRef)({}),a=Object(n.useState)({}),r=Object(i.a)(a,2),o=r[0],l=r[1],s=Object(n.useContext)(X),u=M(s.eventSchedule,e.todaysDate);Object(n.useEffect)((function(){for(var e in t.current={},u){var a=u[e],n="t_".concat(L(a.startDateTime));t.current.hasOwnProperty(n)||(t.current[n]=[]),t.current[n].push(a)}}),[u]),Object(n.useEffect)((function(){var a=setInterval((function(){var a=new Date;Object(w.a)(a,e.todaysDate)||e.setTodaysDate(new Date);for(var n={},c=0;c<=30;c++){var r=Object(P.a)(a,c),i=("0"+r.getHours().toString()).slice(-2),s=("0"+r.getMinutes().toString()).slice(-2),u="t_".concat(i,":").concat(s),m=t.current[u];if(m){var d,v=Object(k.a)(m);try{for(v.s();!(d=v.n()).done;){var f=d.value;f.inAppNotifClosed||(n[f.uid]=f),f.desktopNotifShown||(W(f),f.desktopNotifShown=!0)}}catch(b){v.e(b)}finally{v.f()}}}l(Object(J.a)({},o,{},n))}),1e4);return function(){clearInterval(a)}}),[]);var m=[],d=function(e){m.push(c.a.createElement(U,{key:e,event:o[e],onCloseHandler:function(){return function(e){var t=Object(J.a)({},o);t[e].inAppNotifClosed=!0,delete t[e],l(Object(J.a)({},t))}(e)}}))};for(var v in o)d(v);return c.a.createElement("div",{className:"toast-notification-container"},m)},Y=a(28);var $=function(e){var t=Object(n.useContext)(X),a=function(){var a=[["Subject","Start Date","Start Time","End Date","End Time","Location","Description"]],n=function(e,t){var a={},n="y_".concat(Object(u.a)(t,"yyyy")),c="m_".concat(Object(u.a)(t,"MM"));return e[n]&&e[n][c]&&(a=e[n][c]),a}(t.eventSchedule,e.currentMonth);for(var c in n){var r=c.split("_")[1],o=Object(Y.a)(e.currentMonth,parseInt(r)),i=Object(u.a)(o,f),l=n[c];for(var s in l){var m=l[s],d=m.subject,v=m.startDateTime,b=m.endDateTime,E=m.location,p=m.description,h=L(v),j=L(b);a.push([d,i,h,i,j,E,p])}}return a};return c.a.createElement("button",{className:"btn-primary export-csv-button",onClick:function(){var t=a();!function(e,t){var a,n=function(e){for(var t="",a=0;a<e.length;a++){var n=(null===e[a]?"":e[a].toString()).replace(/"/g,'""');n.search(/("|,|\n)/g)>=0&&(n='"'+n+'"'),a>0&&(t+=","),""===n&&(n="-"),t+=n}return t+"\n"},c="",r=Object(k.a)(t);try{for(r.s();!(a=r.n()).done;){c+=n(a.value)}}catch(s){r.e(s)}finally{r.f()}var o=new Blob([c],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),l=URL.createObjectURL(o);i.setAttribute("href",l),i.setAttribute("download",e),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}("Events for ".concat(Object(u.a)(e.currentMonth,b)),t)}},c.a.createElement("span",{className:"icon mr5"},"save_alt"),"Export events as CSV")},z=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},G=function(){var e=localStorage.getItem("calendar-scheduled-events-v2")||"{}";return JSON.parse(e)},K=function(e,t){var a=G();switch(function(e){e.startDateTime=e.startDateTime.toUTCString(),e.endDateTime=e.endDateTime.toUTCString()}(t),e){case"ADD_EDIT":a[t.uid]=t;break;case"DELETE":delete a[t.uid]}localStorage.setItem("calendar-scheduled-events-v2",JSON.stringify(a))},Q=function(e,t){var a,n=Object(J.a)({},e),c=function(e){_(n,e)};switch(t.type){case"ADD_EVENT":t.event.uid=z(),c(t.event),K("ADD_EDIT",Object(J.a)({},t.event));break;case"EDIT_EVENT":c(t.event),K("ADD_EDIT",Object(J.a)({},t.event));break;case"DELETE_EVENT":a=t.event,delete M(n,a.startDateTime)[a.uid],K("DELETE",Object(J.a)({},t.event))}return n},X=Object(n.createContext)(),Z=function(){var e,t={},a=G();for(var n in a)(e=a[n]).startDateTime=new Date(e.startDateTime.toString()),e.endDateTime=new Date(e.endDateTime.toString()),_(t,a[n]);return t}()||{},ee=function(){var e=Object(n.useState)(new Date),t=Object(i.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(new Date),l=Object(i.a)(o,2),s=l[0],u=l[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),v=d[0],f=d[1],b=Object(n.useReducer)(Q,Z),E=Object(i.a)(b,2),p=E[0],h=E[1],j=Object(n.useCallback)((function(e){u(e),f(!0)}),[]);return c.a.createElement(X.Provider,{value:{eventSchedule:p,eventScheduleDispatch:h}},c.a.createElement("div",{className:"calendar"},c.a.createElement(O,{currentMonth:s,setCurrentMonth:u}),c.a.createElement(y,null),c.a.createElement(B,{currentMonth:s,todaysDate:a,onDateClick:j}),v&&c.a.createElement(R,{selectedDate:s,setEventsView:f}),c.a.createElement(q,{todaysDate:a,setTodaysDate:r})),c.a.createElement($,{currentMonth:s}))};a(18);var te=function(){return c.a.createElement(ee,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.8d5f089c.chunk.js.map