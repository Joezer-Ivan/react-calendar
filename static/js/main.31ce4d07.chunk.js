(this["webpackJsonpcalendar-app"]=this["webpackJsonpcalendar-app"]||[]).push([[0],{13:function(e,t,a){e.exports=a(20)},18:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(11),o=a.n(r),l=(a(18),a(4)),i=a(12),s=a(21),u=a(30);var m=function(e){return c.a.createElement("div",{className:"header row row-middle flex-around"},c.a.createElement("span",{className:"icon anim-icon",onClick:function(){e.setCurrentMonth(Object(s.a)(e.currentMonth,1))}},"chevron_left"),c.a.createElement("span",null,Object(u.a)(e.currentMonth,"MMMM yyyy")),c.a.createElement("span",{className:"icon anim-icon",onClick:function(){e.setCurrentMonth(Object(i.a)(e.currentMonth,1))}},"chevron_right"))};var d=function(){for(var e=[],t=0,a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];t<a.length;t++){var n=a[t];e.push(c.a.createElement("div",{className:"column col-center",key:n},n))}return c.a.createElement("div",{className:"days row"},e)},v=a(23),b=a(24),f=a(25),E=a(26),p=a(27),h=a(22),j=a(31),y=a(6),O=function(e,t){var a={},n="y_".concat(Object(u.a)(t,"yyyy")),c="m_".concat(Object(u.a)(t,"MM")),r="d_".concat(Object(u.a)(t,"dd"));return e[n]&&e[n][c]&&e[n][c][r]&&(a=e[n][c][r]),a},N=function(e){if(!e)return"";var t=e.split(":"),a=parseInt(t[0]),n=t[1],c="AM";a>=12&&(c="PM",a%=12);var r=0===a?"12":("0"+a.toString()).slice(-2);return"".concat(r,":").concat(n," ").concat(c)},S=function(e,t){var a=e.split(":"),n=t.split(":"),c=parseInt(a[0])-parseInt(n[0]);return c=0===c?parseInt(a[1])-parseInt(n[1]):c};var C=function(e){var t=Object(n.useRef)(null),a=Object(n.useState)(!1),r=Object(l.a)(a,2),o=r[0],i=r[1],s=Object(n.useContext)(H),m=O(s.eventSchedule,e.day),d=[];for(var v in m){var b=m[v];d.push(c.a.createElement("li",{key:v},b.startTime&&c.a.createElement("span",{className:"mr5"},N(b.startTime)),c.a.createElement("span",{className:"event-subject"},b.subject)))}return Object(n.useEffect)((function(){t.current.scrollHeight-t.current.clientHeight>0?i(!0):i(!1)}),[m]),c.a.createElement("div",{className:"column cell ".concat(Object(h.a)(e.day,e.monthStart)?Object(j.a)(e.day,e.todaysDate)?"selected":"":"disabled"),ref:t,onClick:function(){return e.onDateClick(e.day)}},c.a.createElement("span",{className:"number"},Object(u.a)(e.day,"d")),c.a.createElement("ul",{className:"ul-no-bullets cell-event-list"},d),o&&c.a.createElement("span",{className:"overflow-banner"},"...more events"))};var k=function(e){for(var t=Object(v.a)(e.currentMonth),a=Object(b.a)(t),n=Object(f.a)(t),r=Object(E.a)(a),o=[],l=[],i=n;i<=r;){for(var s=0;s<7;s++)l.push(c.a.createElement(C,{day:i,key:i,monthStart:t,todaysDate:e.todaysDate,onDateClick:e.onDateClick})),i=Object(p.a)(i,1);o.push(c.a.createElement("div",{className:"row",key:i}," ",l," ")),l=[]}return c.a.createElement("div",{className:"body"},o)};var w=function(e){var t=e.event||{},a=Object(n.useState)(t.subject||""),r=Object(l.a)(a,2),o=r[0],i=r[1],s=Object(n.useState)(t.startTime||""),u=Object(l.a)(s,2),m=u[0],d=u[1],v=Object(n.useState)(t.endTime||""),b=Object(l.a)(v,2),f=b[0],E=b[1],p=Object(n.useState)(t.location||""),h=Object(l.a)(p,2),j=h[0],y=h[1],O=Object(n.useState)(t.description||""),N=Object(l.a)(O,2),C=N[0],k=N[1],w=Object(n.useState)(""),D=Object(l.a)(w,2),T=D[0],g=D[1],M=Object(n.useState)(""),x=Object(l.a)(M,2),_=x[0],I=x[1],F=Object(n.useContext)(H),L=function(){var e=!0;return""===o.trim()&&(g("Subject cannot be empty"),e=!1),!m||S(m,f)<0||(I("End Time must be ahead of start time"),e=!1),e};return c.a.createElement("li",{className:"event-card"},c.a.createElement("form",{className:"event-form",onSubmit:function(a){if(a.preventDefault(),L()){var n=t.uid?"EDIT_EVENT":"ADD_EVENT",c={uid:t.uid,subject:o,startTime:m,endTime:f,location:j,description:C};F.eventScheduleDispatch({type:n,date:e.date,event:c}),e.closeFormCallBack()}}},c.a.createElement("span",{className:"form-row"},c.a.createElement("label",{htmlFor:"subject"},"Subject *"),c.a.createElement("input",{name:"subject",type:"type",maxLength:"30",placeholder:"Event subject",autoFocus:!0,value:o,onChange:function(e){return i(e.target.value)}})),T&&c.a.createElement("div",{className:"form-validation-error"},T),c.a.createElement("span",{className:"form-row"},c.a.createElement("label",{htmlFor:"startTime"},"Start time"),c.a.createElement("input",{className:"mr10",name:"startTime",type:"time",value:m,onChange:function(e){return d(e.target.value)}}),c.a.createElement("label",{htmlFor:"endTime"},"End time"),c.a.createElement("input",{name:"endTime",type:"time",value:f,onChange:function(e){return E(e.target.value)}})),_&&c.a.createElement("div",{className:"form-validation-error"},_),c.a.createElement("span",{className:"form-row"},c.a.createElement("label",{htmlFor:"location"},"Location"),c.a.createElement("input",{name:"location",type:"text",value:j,onChange:function(e){return y(e.target.value)}})),c.a.createElement("span",{className:"form-row"},c.a.createElement("label",{htmlFor:"description"},"Description"),c.a.createElement("textarea",{name:"description",type:"text",value:C,onChange:function(e){return k(e.target.value)}})),c.a.createElement("button",{type:"submit",className:"mr10 btn-primary"},"Save"),c.a.createElement("button",{type:"cancel",onClick:function(){return e.closeFormCallBack()}},"Cancel")))};var D=function(e){return c.a.createElement("div",{className:"event-card"},c.a.createElement("div",{className:"flex-bx flex-between row-middle pb5"},c.a.createElement("div",{className:"card-title"},c.a.createElement("span",{className:"event-subject mr10"},e.event.subject),e.event.startTime&&c.a.createElement("span",null,N(e.event.startTime)," - ",N(e.event.endTime))),e.showEditOptions&&c.a.createElement("div",{className:"flex-bx"},c.a.createElement("span",{className:"icon anim-icon mr10",title:"Edit",onClick:e.handleEditBtnClick},"edit"),c.a.createElement("span",{className:"icon anim-icon",title:"Delete",onClick:e.handleDeleteBtnClick},"delete_outline"))),e.event.location&&c.a.createElement("div",{className:"flex-bx row-middle pb5"},c.a.createElement("span",{className:"icon"},"location_on"),c.a.createElement("span",null,e.event.location)),e.event.description&&c.a.createElement("span",null,e.event.description))};var T=function(e){var t=e.event,a=Object(n.useState)(!1),r=Object(l.a)(a,2),o=r[0],i=r[1],s=Object(n.useContext)(H);return o?c.a.createElement(w,{date:e.date,closeFormCallBack:function(){i(!1)},event:t}):c.a.createElement("li",null,c.a.createElement(D,{event:t,showEditOptions:!0,handleDeleteBtnClick:function(){s.eventScheduleDispatch({type:"DELETE_EVENT",date:e.date,event:t})},handleEditBtnClick:function(){return i(!0)}}))};var g=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),r=a[0],o=a[1],i=Object(n.useContext)(H),s=O(i.eventSchedule,e.selectedDate),m=[];for(var d in s){var v=s[d];m.push(c.a.createElement(T,{key:d,event:v,date:e.selectedDate}))}return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modalMask",onClick:function(){return e.setEventsView(!1)}}),c.a.createElement("div",{className:"popover modal daily-events"},c.a.createElement("div",{className:"header flex-bx flex-between"},c.a.createElement("span",null,Object(u.a)(e.selectedDate,"dd MMMM yyyy")),c.a.createElement("div",null,c.a.createElement("button",{className:"mr10 btn-primary",onClick:function(){return o(!0)}},c.a.createElement("span",{className:"icon"},"add"),"New Event"),c.a.createElement("span",{className:"icon anim-icon",onClick:function(){return e.setEventsView(!1)}},"close"))),c.a.createElement("div",null,c.a.createElement("ul",{className:"events-list ul-no-bullets"},r&&c.a.createElement(w,{date:e.selectedDate,closeFormCallBack:function(){o(!1)}}),m.length>0?m:!r&&"You don't have any events scheduled for this day..."))))},M=a(7),x=a(28);var _=function(e){return c.a.createElement("div",{className:"toast-notification shake"},c.a.createElement("span",{className:"fr icon anim-icon",onClick:e.onCloseHandler},"close"),c.a.createElement(D,{event:e.event,showEditOptions:!1}))},I=function(e){if("Notification"in window){var t="".concat(e.subject," \t ").concat(N(e.startTime)," - ").concat(N(e.endTime)),a={body:e.description};"granted"===Notification.permission?new Notification(t,a):"denied"!==Notification.permission&&Notification.requestPermission().then((function(e){"granted"===e&&new Notification("Hi there!")}))}else alert("This browser does not support desktop notifications")};var F=function(e){var t=Object(n.useRef)({}),a=Object(n.useState)({}),r=Object(l.a)(a,2),o=r[0],i=r[1],s=Object(n.useContext)(H),u=O(s.eventSchedule,e.todaysDate);Object(n.useEffect)((function(){for(var e in t.current={},u){var a=u[e],n="t_".concat(a.startTime);t.current.hasOwnProperty(n)||(t.current[n]=[]),t.current[n].push(a)}}),[u]),Object(n.useEffect)((function(){var a=setInterval((function(){var a=new Date;Object(j.a)(a,e.todaysDate)||e.setTodaysDate(new Date);for(var n={},c=0;c<=30;c++){var r=Object(x.a)(a,c),l=("0"+r.getHours().toString()).slice(-2),s=("0"+r.getMinutes().toString()).slice(-2),u="t_".concat(l,":").concat(s),m=t.current[u];if(m){var d,v=Object(y.a)(m);try{for(v.s();!(d=v.n()).done;){var b=d.value;b.inAppNotifClosed||(n[b.uid]=b),b.desktopNotifShown||(I(b),b.desktopNotifShown=!0)}}catch(f){v.e(f)}finally{v.f()}}}i(Object(M.a)({},o,{},n))}),1e4);return function(){clearInterval(a)}}),[]);var m=[],d=function(e){m.push(c.a.createElement(_,{key:e,event:o[e],onCloseHandler:function(){return function(e){var t=Object(M.a)({},o);t[e].inAppNotifClosed=!0,delete t[e],i(Object(M.a)({},t))}(e)}}))};for(var v in o)d(v);return c.a.createElement("div",{className:"toast-notification-container"},m)},L=a(29);var B=function(e){var t=Object(n.useContext)(H),a=function(){var a=[["Subject","Start Date","Start Time","End Date","End Time","Location","Description"]],n=function(e,t){var a={},n="y_".concat(Object(u.a)(t,"yyyy")),c="m_".concat(Object(u.a)(t,"MM"));return e[n]&&e[n][c]&&(a=e[n][c]),a}(t.eventSchedule,e.currentMonth);for(var c in n){var r=c.split("_")[1],o=Object(L.a)(e.currentMonth,parseInt(r)),l=Object(u.a)(o,"dd/MM/yy"),i=n[c];for(var s in i){var m=i[s],d=m.subject,v=m.startTime,b=m.endTime,f=m.location,E=m.description;a.push([d,l,v,l,b,f,E])}}return a};return c.a.createElement("button",{className:"btn-primary export-csv-button",onClick:function(){var t=a();!function(e,t){var a,n=function(e){for(var t="",a=0;a<e.length;a++){var n=null===e[a]?"":e[a].toString();e[a]instanceof Date&&(n=e[a].toLocaleString());var c=n.replace(/"/g,'""');c.search(/("|,|\n)/g)>=0&&(c='"'+c+'"'),a>0&&(t+=","),""===c&&(c="-"),t+=c}return t+"\n"},c="",r=Object(y.a)(t);try{for(r.s();!(a=r.n()).done;){c+=n(a.value)}}catch(s){r.e(s)}finally{r.f()}var o=new Blob([c],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),i=URL.createObjectURL(o);l.setAttribute("href",i),l.setAttribute("download",e),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}("Events for ".concat(Object(u.a)(e.currentMonth,"LLLL")),t)}},c.a.createElement("span",{className:"icon mr5"},"save_alt"),"Export events as CSV")},V=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},A=function(e,t){var a,n,c=Object(M.a)({},e),r=function(e,t){var a="y_".concat(Object(u.a)(t,"yyyy")),n="m_".concat(Object(u.a)(t,"MM")),r="d_".concat(Object(u.a)(t,"dd"));c[a]||(c[a]={}),c[a][n]||(c[a][n]={}),c[a][n][r]||(c[a][n][r]={}),c[a][n][r][e.uid]=e,c[a][n][r]=function(e){var t,a={},n=Object.keys(e).sort((function(t,a){return e[t].startTime||e[a].startTime?e[t].startTime?e[a].startTime?S(e[t].startTime,e[a].startTime):1:-1:0})),c=Object(y.a)(n);try{for(c.s();!(t=c.n()).done;){var r=t.value;a[r]=e[r]}}catch(o){c.e(o)}finally{c.f()}return a}(c[a][n][r])};switch(t.type){case"ADD_EVENT":t.event.uid=V(),r(t.event,t.date);break;case"EDIT_EVENT":r(t.event,t.date);break;case"DELETE_EVENT":a=t.event.uid,t.date,delete O(c,t.date)[a]}return n=c,localStorage.setItem("calendar-scheduled-events",JSON.stringify(n)),c},H=Object(n.createContext)(),R=function(){var e=localStorage.getItem("calendar-scheduled-events");return JSON.parse(e)}()||{},J=function(){var e=Object(n.useState)(new Date),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(new Date),i=Object(l.a)(o,2),s=i[0],u=i[1],v=Object(n.useState)(!1),b=Object(l.a)(v,2),f=b[0],E=b[1],p=Object(n.useReducer)(A,R),h=Object(l.a)(p,2),j=h[0],y=h[1],O=Object(n.useCallback)((function(e){u(e),E(!0)}),[]);return c.a.createElement(H.Provider,{value:{eventSchedule:j,eventScheduleDispatch:y}},c.a.createElement("div",{className:"calendar"},c.a.createElement(m,{currentMonth:s,setCurrentMonth:u}),c.a.createElement(d,null),c.a.createElement(k,{currentMonth:s,todaysDate:a,onDateClick:O}),f&&c.a.createElement(g,{selectedDate:s,setEventsView:E}),c.a.createElement(F,{todaysDate:a,setTodaysDate:r})),c.a.createElement(B,{currentMonth:s}))};a(19);var P=function(){return c.a.createElement(J,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.31ce4d07.chunk.js.map